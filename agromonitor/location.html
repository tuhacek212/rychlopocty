<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroMonitor - Detail střediska</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-root">
        <div class="header">
            <div class="logo">AgroMonitor</div>
            <div class="header-controls">
                <button class="location-trigger back-button" id="backButton" type="button" style="margin-right: auto;">
                    ← Zpět
                </button>
                <div class="location-picker" id="locationPicker" style="display: none;">
                    <button class="location-trigger" id="locationTrigger" type="button" aria-haspopup="listbox" aria-expanded="false">
                        <span class="header-text" id="locationName">Načítání...</span>
                        <span class="status-dot" id="locationStatusDot" aria-label="Online"></span>
                    </button>
                    <div class="location-menu" id="locationMenu" role="listbox" aria-label="Vyber středisko"></div>
                </div>
                <span class="header-separator">|</span>
                <span class="header-text" id="userName">Načítání...</span>
                <span class="header-separator">|</span>
                <span class="header-text last-update" id="lastUpdateLabel">Data: neznámý čas</span>
                <button class="map-button" id="mapButton" type="button">Mapa sil</button>
                <button class="logout-button" id="logoutButton" type="button">Odhlásit</button>
            </div>
        </div>

        <div class="container">
            <div class="admin-alerts hidden" id="adminAlerts" aria-live="polite"></div>
            <div id="silosContainer">
                <div style="text-align: center; padding: 60px 24px; color: #64748b;">
                    <div style="font-size: 48px; margin-bottom: 16px;">⟳</div>
                    <div>Načítání dat střediska...</div>
                </div>
            </div>

            <div class="bottom-grid">
                <div class="log-panel">
                    <div class="panel-title">Log událostí</div>
                    <div class="log-entries" id="logEntries"></div>
                </div>
            </div>

            <div class="temp-legend">
                <div class="legend-item">
                    <div class="legend-color temp-very-cold"></div>
                    <span>&lt; 5°C</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color temp-cold"></div>
                    <span>5-10°C</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color temp-optimal"></div>
                    <span>10-15°C</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color temp-normal"></div>
                    <span>15-18°C</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color temp-warm"></div>
                    <span>18-20°C</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color temp-hot"></div>
                    <span>&gt; 20°C</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for detailed charts -->
    <div class="modal hidden" id="detailModal" aria-hidden="true">
        <div class="modal-backdrop" data-close="true"></div>
        <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Detail grafu</div>
                <button class="modal-close" type="button" aria-label="Zavřít">×</button>
            </div>
            <div class="modal-controls">
                <div class="history-toggle">
                    <button class="history-btn active" data-period="30d" type="button">30 dní</button>
                    <button class="history-btn" data-period="1y" type="button">1 rok</button>
                </div>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <!-- Map Modal -->
    <div class="modal hidden map-modal" id="mapModal" aria-hidden="true">
        <div class="modal-backdrop" data-close="true"></div>
        <div class="modal-card map-card" role="dialog" aria-modal="true" aria-labelledby="mapTitle">
            <div class="modal-header">
                <div class="modal-title" id="mapTitle">Mapa sil</div>
                <button class="modal-close" type="button" aria-label="Zavřít">×</button>
            </div>
            <div class="map-toolbar">
                <div class="map-location" id="mapLocationLabel">Středisko</div>
                <div class="map-help" id="mapHelp">Klikněte na silo pro zvýraznění.</div>
                <div class="map-actions">
                    <button class="map-export-button" id="mapExportButton" type="button">Export pozic</button>
                </div>
            </div>
            <div class="map-body">
                <div class="map-stage" id="mapStage">
                    <img class="map-image" id="mapImage" alt="Mapa areálu">
                    <div class="map-overlay" id="mapOverlay"></div>
                </div>
                <div class="map-legend" id="mapLegend"></div>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="app.js"></script>
</body>
</html>

