<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroMonitor - Monitoring skladů</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="login-screen" id="loginScreen" aria-hidden="false">
        <div class="login-card" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
            <div class="login-brand">AgroMonitor</div>
            <div class="login-title" id="loginTitle">Přihlášení do systému</div>
            <div class="login-subtitle">Zadejte 6místný přístupový kód. Přístup bude omezen na přiřazená střediska.</div>
            <div class="login-codes">
                <div class="login-code-row"><span>Admin</span><span>123456</span></div>
                <div class="login-code-row"><span>ZOD Brniště a.s.</span><span>234567</span></div>
                <div class="login-code-row"><span>Agro Vysočina s.r.o.</span><span>345678</span></div>
            </div>
            <form class="login-form" id="loginForm">
                <label class="login-label" for="accessCodeInput">Přístupový kód</label>
                <input class="login-input" id="accessCodeInput" type="password" inputmode="numeric" pattern="[0-9]{6}" maxlength="6" autocomplete="one-time-code" placeholder="******" aria-describedby="loginHint loginError">
                <div class="login-hint" id="loginHint">Pokud kód nefunguje, kontaktujte správce.</div>
                <div class="login-error" id="loginError" role="alert" aria-live="polite"></div>
                <button class="login-button" id="loginButton" type="submit">Odemknout přístup</button>
            </form>
        </div>
    </div>

    <div class="app-root" id="appRoot" aria-hidden="true">
    <div class="header">
        <div class="logo">AgroMonitor</div>
        <div class="header-controls">
            <div class="location-picker" id="locationPicker">
                <button class="location-trigger" id="locationTrigger" type="button" aria-haspopup="listbox" aria-expanded="false">
                    <span class="header-text" id="locationName">Načítání...</span>
                    <span class="status-dot" id="locationStatusDot" aria-label="Online"></span>
                </button>
                <div class="location-menu" id="locationMenu" role="listbox" aria-label="Vyber středisko"></div>
            </div>
            <span class="header-separator">|</span>
            <div class="enterprise-picker" id="enterprisePicker">
                <button class="location-trigger" id="enterpriseTrigger" type="button" aria-haspopup="listbox" aria-expanded="false">
                    <span class="header-text" id="accountName">Agro Vysočina s.r.o.</span>
                </button>
                <div class="location-menu" id="enterpriseMenu" role="listbox" aria-label="Vyber podnik"></div>
            </div>
            <span class="header-separator">|</span>
            <span class="header-text" id="userName">Jan Novák</span>
            <span class="header-separator">|</span>
            <span class="header-text last-update" id="lastUpdateLabel">Data: neznámý čas</span>
            <button class="map-button" id="mapButton" type="button">Mapa sil</button>
            <button class="logout-button" id="logoutButton" type="button">Odhlásit</button>
        </div>
    </div>

        <div class="container">
        <div class="admin-alerts hidden" id="adminAlerts" aria-live="polite"></div>
        <div id="silosContainer"></div>

        <div class="bottom-grid">
            <div class="log-panel">
                <div class="panel-title">Log událostí</div>
                <div class="log-entries" id="logEntries"></div>
            </div>
            <div class="log-panel docs-panel">
                <div class="panel-title">Dokumenty (OneDrive)</div>
                <div class="docs-entries" id="docsEntries"></div>
            </div>
        </div>

        <div class="temp-legend">
            <div class="legend-item">
                <div class="legend-color temp-very-cold"></div>
                <span>< 5°C</span>
            </div>
            <div class="legend-item">
                <div class="legend-color temp-cold"></div>
                <span>5-10°C</span>
            </div>
            <div class="legend-item">
                <div class="legend-color temp-optimal"></div>
                <span>10-15°C</span>
            </div>
            <div class="legend-item">
                <div class="legend-color temp-normal"></div>
                <span>15-18°C</span>
            </div>
            <div class="legend-item">
                <div class="legend-color temp-warm"></div>
                <span>18-20°C</span>
            </div>
            <div class="legend-item">
                <div class="legend-color temp-hot"></div>
                <span>> 20°C</span>
            </div>
        </div>
    </div>

    <script src="app.js"></script>

    <div class="modal hidden" id="detailModal" aria-hidden="true">
        <div class="modal-backdrop" data-close="true"></div>
        <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Detail grafu</div>
                <button class="modal-close" type="button" aria-label="Zavřít">×</button>
            </div>
            <div class="modal-controls">
                <div class="history-toggle">
                    <button class="history-btn active" data-period="30d" type="button">30 dní</button>
                    <button class="history-btn" data-period="1y" type="button">1 rok</button>
                </div>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>
    <div class="modal hidden map-modal" id="mapModal" aria-hidden="true">
        <div class="modal-backdrop" data-close="true"></div>
        <div class="modal-card map-card" role="dialog" aria-modal="true" aria-labelledby="mapTitle">
            <div class="modal-header">
                <div class="modal-title" id="mapTitle">Mapa sil</div>
                <button class="modal-close" type="button" aria-label="Zavřít">×</button>
            </div>
            <div class="map-toolbar">
                <div class="map-location" id="mapLocationLabel">Středisko</div>
                <div class="map-help" id="mapHelp">Klikněte na silo pro zvýraznění.</div>
                <div class="map-actions">
                    <button class="map-export-button" id="mapExportButton" type="button">Export pozic</button>
                </div>
            </div>
            <div class="map-body">
                <div class="map-stage" id="mapStage">
                    <img class="map-image" id="mapImage" alt="Mapa areálu">
                    <div class="map-overlay" id="mapOverlay"></div>
                </div>
                <div class="map-legend" id="mapLegend"></div>
            </div>
        </div>
    </div>
    </div>
</body>
</html>




